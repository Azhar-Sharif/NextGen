{% extends "base.html" %}

{% block content %}
<div class="interview-container">

    <div id="initialData" data-question="{{ first_question }}" data-audio="{{ question_audio }}"></div>

    <!-- Start Button -->
    <button id="startButton" class="btn btn-primary">Start</button>

    <!-- Question Section (initially hidden) -->
    <div id="questionSection" style="display: none;">
        <h2>Current Question:</h2>
        <p id="questionText" class="question-text"></p>
    </div>

    <!-- Audio Player -->
    <audio id="question-audio" style="display: none;">
        <source src="{{ question_audio }}" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>

</div>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const startButton = document.getElementById('startButton');
        const questionSection = document.getElementById('questionSection');
        const questionText = document.getElementById('questionText');
        const audioElement = document.getElementById('question-audio');
        const initialData = document.getElementById('initialData');

        // When Start is clicked
        startButton.addEventListener('click', function () {
            const question = initialData.getAttribute('data-question');
            const audio = initialData.getAttribute('data-audio');

            // Show question
            questionText.textContent = question;
            questionSection.style.display = 'block';

            // Hide start button
            startButton.style.display = 'none';

            // Play the audio
            audioElement.src = audio;
            audioElement.load();
            audioElement.play().catch(err => {
                console.error("Audio playback failed:", err);
            });
        });
    });
</script>
{% endblock %}
